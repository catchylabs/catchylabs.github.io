{"version":3,"sources":["assets/app-logo.png","src/screens/auth/authSlice.tsx","src/hooks/useAuth.ts","src/store/services/baseQuery.ts","src/store/services/api.ts","src/store/services/auth.ts","src/components/Info.tsx","src/style/theme.ts","src/components/TextInput.tsx","src/components/Button.tsx","src/components/FormField.tsx","src/screens/auth/Login.tsx","src/components/Header.tsx","src/helpers.ts","src/store/services/calculator.ts","src/screens/calculator/Calculator.tsx","src/screens/calculator/index.tsx","src/screens/calculator/calculatorSlice.ts","src/screens/Apps.tsx","src/hooks/useCalculator.ts","src/screens/Main.tsx","src/store/store.ts","App.tsx"],"names":["module","exports","slice","createSlice","name","initialState","user","access_token","refresh_token","reducers","setCredentials","state","action","payload","actions","getAuthData","auth","useAuth","useSelector","useMemo","baseQuery","fetchBaseQuery","baseUrl","Constants","manifest","extra","headers","baseQueryWithReauth","args","api","extraOptions","a","async","accessToken","getState","refreshToken","authorization","result","error","status","data","error_code","url","method","refreshResult","userData","jwtDecode","dispatch","jsonValue","JSON","stringify","AsyncStorage","setItem","removeItem","createApi","reducerPath","endpoints","tagTypes","useLoginMutation","injectEndpoints","build","login","mutation","query","credentials","body","transformResponse","onQueryStarted","queryFulfilled","console","log","Info","text","View","style","container","Text","StyleSheet","create","padding","borderWidth","borderColor","borderRadius","width","marginTop","marginBottom","color","fontSize","theme","primary","white","grey","lightGrey","red","lightRed","TextInput","label","rest","errorStyle","defaultStyle","containerStyle","labelStyle","inputStyle","errorLabelStyle","height","paddingLeft","Button","onClick","disabled","type","buttonStyle","styles","button","textStyle","push","buttonSecondary","textSecondary","TouchableOpacity","onPress","alignItems","justifyContent","textTransform","backgroundColor","borderStyle","FormField","children","Login","navigation","useState","username","password","formState","setFormState","Image","source","AppLogo","isError","message","placeholder","value","onChangeText","secureTextEntry","unwrap","replace","isLoading","flex","Platform","select","web","default","loginButton","HeaderBackButton","onBack","backButton","backContainer","MaterialIcons","size","backButtonText","HeaderRigtButton","rightButton","rightButtonText","HeaderBackground","display","flexDirection","fontWeight","marginLeft","marginRight","convertStringToDouble","val","Number","parseFloat","toggleNumberSign","test","calculatorApi","calculate","operand1","operand2","operator","client_id","calculatorUrlPostfix","number1","number2","fetchSessions","userId","providesTags","sessionStart","sessionStop","sessionId","invalidatesTags","useCalculateMutation","useFetchSessionsQuery","useSessionStartMutation","useSessionStopMutation","CalculatorButton","loading","concat","buttonContent","buttonText","ActivityIndicator","animating","Calculator","setState","useEffect","s","handlePress","operand","current","String","screen","screenText","resultText","toString","buttonGroup","row","maxWidth","margin","textAlign","CalculatorScreen","isCalculateLaoding","handleBack","navigate","useLayoutEffect","setOptions","headerLeft","SafeAreaView","OS","activeSession","undefined","setActiveSession","extraReducers","builder","addMatcher","matchFulfilled","getCalculatorState","calculator","Apps","calculatorState","useCalculator","useDispatch","isSessionsFetching","id","startSession","sessionStartError","isSessionStartError","isSessionStartLoading","stopSession","headerRight","logout","backHandler","BackHandler","addEventListener","remove","handleStartSession","endSession","openCalculator","safeArea","is_active","renderContent","alignSelf","Stack","createNativeStackNavigator","Main","setLoading","loggedIn","getItem","parse","checkIfUserDataExist","Navigator","initialRouteName","Screen","component","options","headerBackVisible","headerTitle","headerBackground","header","store","configureStore","reducer","authReducer","calculatorReducer","middleware","getDefaultMiddleware","App","NavigationContainer"],"mappings":"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","file":"static/js/app.b9f4fbc9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/app-logo.3be78e48.png\";","import { createSlice } from \"@reduxjs/toolkit\";\nimport type { User } from \"../../store/services/api\";\nimport type { RootState } from \"../../store/store\";\n\ntype AuthState = {\n  user: User | null;\n  access_token: string | null;\n  refresh_token: string | null;\n};\n\nconst slice = createSlice({\n  name: \"auth\",\n  initialState: {\n    user: null,\n    access_token: null,\n    refresh_token: null,\n  } as AuthState,\n  reducers: {\n    setCredentials: (state, action) => {\n      state.user = action.payload.user;\n      state.access_token = action.payload.access_token;\n      state.refresh_token = action.payload.refresh_token;\n    },\n  },\n});\n\nexport const { setCredentials } = slice.actions;\n\nexport default slice.reducer;\n\nexport const getAuthData = (state: RootState) => state.auth;\n","import { useMemo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { getAuthData } from \"../screens/auth/authSlice\";\n\nexport const useAuth = () => {\n  const auth = useSelector(getAuthData);\n\n  return useMemo(() => auth, [auth]);\n};\n","import {\n  fetchBaseQuery,\n  FetchArgs,\n  FetchBaseQueryError,\n  BaseQueryFn,\n} from \"@reduxjs/toolkit/query/react\";\n\nimport Constants from \"expo-constants\";\nimport { setCredentials } from \"../../screens/auth/authSlice\";\nimport jwtDecode from \"jwt-decode\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { RootState } from \"../store\";\n\nconst baseQuery = fetchBaseQuery({\n  baseUrl: Constants.manifest?.extra?.baseUrl,\n  headers: {\n    \"content-type\": \"application/json\",\n  },\n});\n\nconst baseQueryWithReauth: BaseQueryFn<\n  string | FetchArgs,\n  unknown,\n  FetchBaseQueryError\n> = async (args, api, extraOptions) => {\n  const accessToken = (api.getState() as RootState).auth.access_token;\n  const refreshToken = (api.getState() as RootState).auth.refresh_token;\n\n  //original request\n  let result = await baseQuery(\n    {\n      ...args,\n      headers: {\n        authorization: `Bearer ${accessToken}`,\n      },\n    },\n    api,\n    extraOptions,\n  );\n\n  if (\n    result.error &&\n    result.error.status === 403 &&\n    (result.error.data.error_code === \"TOKEN_EXPIRED\" ||\n      result.error.data.error_code === \"TOKEN_INVALID\")\n  ) {\n    // try to get a new token\n    const refreshResult = await baseQuery(\n      {\n        url: \"api/v1/refresh-token\",\n        method: \"POST\",\n        headers: {\n          authorization: `Bearer ${refreshToken}`,\n        },\n      },\n      api,\n      extraOptions,\n    );\n\n    if (refreshResult.data) {\n      // store the new token\n      const { access_token, refresh_token } = refreshResult.data;\n      const userData = {\n        user: jwtDecode(access_token),\n        access_token,\n        refresh_token,\n      };\n\n      api.dispatch(setCredentials(userData));\n      const jsonValue = JSON.stringify(userData);\n      await AsyncStorage.setItem(\"@user\", jsonValue);\n\n      // retry the initial query\n      result = await baseQuery(\n        {\n          ...args,\n          headers: {\n            authorization: `Bearer ${access_token}`,\n          },\n        },\n        api,\n        extraOptions,\n      );\n    } else {\n      api.dispatch(setCredentials({}));\n      AsyncStorage.removeItem(\"@user\");\n    }\n  }\n  return result;\n};\n\nexport default baseQueryWithReauth;\n","import { createApi } from \"@reduxjs/toolkit/query/react\";\nimport baseQueryWithReauth from \"./baseQuery\";\n\nexport const api = createApi({\n  reducerPath: \"api\",\n  baseQuery: baseQueryWithReauth,\n  endpoints: () => ({}),\n  tagTypes: [\"session\"],\n});\n","import { api } from \"./api\";\nimport jwtDecode from \"jwt-decode\";\nimport { setCredentials } from \"../../screens/auth/authSlice\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nexport interface User {\n  id: string;\n  username: string;\n  email: string;\n  iss: string;\n  role: string[];\n}\n\nexport interface LoginResponse {\n  access_token: string;\n  refresh_token: string;\n  user_id: string;\n}\n\nexport interface LoginRequest {\n  username: string;\n  password: string;\n}\n\nexport const authApi = api.injectEndpoints({\n  endpoints: (build) => ({\n    login: build.mutation<LoginResponse, LoginRequest>({\n      query: (credentials) => ({\n        url: \"api/v1/login\",\n        method: \"POST\",\n        body: credentials,\n      }),\n      transformResponse: ({ access_token, refresh_token }) => ({\n        user: jwtDecode(access_token),\n        access_token,\n        refresh_token,\n      }),\n      // set user data when logged in\n      async onQueryStarted(args, { dispatch, queryFulfilled }) {\n        try {\n          const { data } = await queryFulfilled;\n          dispatch(setCredentials(data));\n\n          const jsonValue = JSON.stringify(data);\n          await AsyncStorage.setItem(\"@user\", jsonValue);\n        } catch (error) {\n          console.log(error);\n        }\n      },\n    }),\n  }),\n});\n\nexport const { useLoginMutation } = authApi;\n","import React from \"react\";\nimport { View, Text, StyleSheet } from \"react-native\";\n\ninterface Props {\n  text: string;\n}\n\nexport const Info: React.FunctionComponent<Props> = ({ text }) => (\n  <View style={style.container}>\n    <Text style={style.text}>{text}</Text>\n  </View>\n);\n\nconst style = StyleSheet.create({\n  container: {\n    padding: 8,\n    borderWidth: 1,\n    borderColor: \"red\",\n    borderRadius: 4,\n    width: \"100%\",\n    marginTop: 8,\n    marginBottom: 16,\n  },\n  text: {\n    color: \"red\",\n    fontSize: 14,\n  },\n});\n","export const theme = {\n  color: {\n    primary: \"#32CE57\",\n    white: \"#ffffff\",\n    grey: \"#d9d9d9\",\n    lightGrey: \"#f5f5f7\",\n    red: \"#FF0056\",\n    lightRed: \"#E10958\",\n  },\n};\n","import {\n  View,\n  TextInput as RNInput,\n  Text,\n  StyleSheet,\n  TextInputProps,\n} from \"react-native\";\nimport { theme } from \"../style/theme\";\n\ninterface Props extends TextInputProps {\n  label?: string;\n  error?: string;\n}\n\nexport const TextInput: React.FC<Props> = ({ label, error, ...rest }) => {\n  const style = error ? errorStyle : defaultStyle;\n  return (\n    <View style={style.containerStyle}>\n      {label && <Text style={style.labelStyle}>{label}</Text>}\n      <RNInput style={style.inputStyle} {...rest} />\n      {error && <Text style={style.errorLabelStyle}>{error}</Text>}\n    </View>\n  );\n};\n\nconst defaultStyle = StyleSheet.create({\n  containerStyle: {\n    width: \"100%\",\n  },\n  inputStyle: {\n    height: 48,\n    paddingLeft: 16,\n    borderWidth: 1,\n    borderColor: theme.color.grey,\n    borderRadius: 4,\n  },\n  labelStyle: {\n    fontSize: 12,\n    marginBottom: 4,\n  },\n  errorLabelStyle: {\n    fontSize: 12,\n    color: theme.color.red,\n    marginTop: 4,\n  },\n});\n\nconst errorStyle = StyleSheet.create({\n  containerStyle: {\n    width: \"100%\",\n  },\n  inputStyle: {\n    height: 48,\n    paddingLeft: 16,\n    borderWidth: 1,\n    borderColor: theme.color.red,\n    borderRadius: 4,\n  },\n  labelStyle: {\n    fontSize: 12,\n    marginBottom: 4,\n  },\n  errorLabelStyle: {\n    fontSize: 12,\n    color: theme.color.red,\n    marginTop: 4,\n  },\n});\n","import { StyleSheet, TouchableOpacity, Text } from \"react-native\";\nimport { theme } from \"../style/theme\";\n\ninterface Props {\n  text: string;\n  onClick: () => void;\n  disabled?: boolean;\n  style?: any;\n  type?: \"primary\" | \"secondary\";\n}\n\nexport const Button: React.FC<Props> = ({\n  text,\n  onClick,\n  disabled,\n  style,\n  type = \"primary\",\n}) => {\n  const buttonStyle = [styles.button];\n  const textStyle = [styles.text];\n\n  if (type === \"secondary\") {\n    buttonStyle.push(styles.buttonSecondary);\n    textStyle.push(styles.textSecondary);\n  }\n\n  if (style) {\n    buttonStyle.push(style);\n  }\n\n  return (\n    <TouchableOpacity style={buttonStyle} onPress={onClick} disabled={disabled}>\n      <Text style={textStyle}>{text}</Text>\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  button: {\n    height: 48,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    textTransform: \"uppercase\",\n    width: \"100%\",\n    backgroundColor: theme.color.primary,\n    borderRadius: 4,\n  },\n  buttonSecondary: {\n    backgroundColor: \"transparent\",\n    borderColor: theme.color.primary,\n    borderWidth: 1,\n    borderStyle: \"solid\",\n  },\n  text: {\n    fontSize: 14,\n    color: theme.color.white,\n  },\n  textSecondary: {\n    color: theme.color.primary,\n  },\n});\n","import React from \"react\";\nimport { View, StyleSheet } from \"react-native\";\n\ninterface Props {\n  space?: string;\n}\n\nexport const FormField: React.FunctionComponent<Props> = ({ children }) => (\n  <View style={style.container}>{children}</View>\n);\n\nconst style = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    marginBottom: 16,\n  },\n});\n","import { View, StyleSheet, Image, Platform } from \"react-native\";\nimport { useState } from \"react\";\nimport AppLogo from \"../../../assets/app-logo.png\";\nimport { useLoginMutation } from \"../../store/services/auth\";\nimport { Info } from \"../../components/Info\";\nimport { TextInput } from \"../../components/TextInput\";\nimport { Button } from \"../../components/Button\";\nimport { FormField } from \"../../components/FormField\";\n\ninterface LoginFormState {\n  username: string;\n  password: string;\n}\n\nexport const Login = ({ navigation }) => {\n  const [formState, setFormState] = useState<LoginFormState>({\n    username: \"\",\n    password: \"\",\n  });\n  const [login, data] = useLoginMutation();\n\n  const setUsername = (value: string) => {\n    setFormState((state) => ({ ...state, username: value }));\n  };\n\n  const setPassword = (value: string) => {\n    setFormState((state) => ({ ...state, password: value }));\n  };\n\n  const handleLogin = async () => {\n    await login({\n      username: formState.username,\n      password: formState.password,\n    }).unwrap();\n\n    navigation.replace(\"apps\");\n  };\n\n  return (\n    <View style={style.container}>\n      <Image\n        source={AppLogo}\n        style={{ width: 200, height: 60, marginBottom: 48 }}\n      />\n      {data.isError && <Info text={data.error?.data?.message} />}\n\n      <FormField>\n        <TextInput\n          placeholder=\"Username\"\n          label=\"Enter username*\"\n          value={formState.username}\n          onChangeText={setUsername}\n          secureTextEntry={false}\n        />\n      </FormField>\n      <FormField>\n        <TextInput\n          placeholder=\"Password\"\n          label=\"Enter password*\"\n          secureTextEntry={true}\n          value={formState.password}\n          onChangeText={setPassword}\n        />\n      </FormField>\n      <FormField>\n        <Button text=\"Login\" onClick={handleLogin} disabled={data.isLoading} />\n      </FormField>\n    </View>\n  );\n};\n\nconst style = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    padding: 24,\n    ...Platform.select({\n      web: {\n        width: 400,\n      },\n      default: \"100%\",\n    }),\n  },\n  loginButton: {\n    width: \"100%\",\n  },\n});\n","import React from \"react\";\nimport { View, Text, StyleSheet, TouchableOpacity } from \"react-native\";\nimport { theme } from \"../style/theme\";\nimport { MaterialIcons } from \"@expo/vector-icons\";\n\ninterface HeaderBackButtonProps {\n  onBack: () => void;\n}\n\ninterface HeaderRightButtonProps {\n  onPress: () => void;\n  text: string;\n}\n\nexport const HeaderBackButton: React.FC<HeaderBackButtonProps> = ({\n  onBack,\n}) => (\n  <TouchableOpacity style={style.backButton} onPress={onBack}>\n    <View style={style.backContainer}>\n      <MaterialIcons name=\"arrow-back\" size={28} color=\"white\" />\n      <Text style={style.backButtonText}>Back</Text>\n    </View>\n  </TouchableOpacity>\n);\n\nexport const HeaderRigtButton: React.FC<HeaderRightButtonProps> = ({\n  onPress,\n  text,\n}) => (\n  <TouchableOpacity style={style.rightButton} onPress={onPress}>\n    <View style={style.backContainer}>\n      <Text style={style.rightButtonText}>{text}</Text>\n    </View>\n  </TouchableOpacity>\n);\n\nexport const HeaderBackground = () => <View style={style.container} />;\n\nconst style = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    height: \"100%\",\n    backgroundColor: theme.color.primary,\n  },\n  backContainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  backButton: {\n    width: 40,\n  },\n  backButtonText: {\n    color: theme.color.white,\n    fontWeight: \"bold\",\n    marginLeft: 4,\n  },\n  rightButton: {},\n  rightButtonText: {\n    color: theme.color.white,\n    fontWeight: \"bold\",\n    marginRight: 4,\n  },\n});\n","export const convertStringToDouble = (val: string): number =>\n  Number.parseFloat(val.replace(/,/g, \".\"));\n\nexport const convertNumberToString = (val: number): string =>\n  String(val).replace(/\\./g, \",\");\n\nexport const toggleNumberSign = (val: string): string =>\n  /-/g.test(val) ? val.replace(\"-\", \"\") : `-${val}`;\n","import { api } from \"./api\";\nimport { convertStringToDouble } from \"../../helpers\";\n\nexport const calculatorApi = api.injectEndpoints({\n  endpoints: (build) => ({\n    calculate: build.mutation<any, any>({\n      query: ({ operand1, operand2, operator, client_id }) => {\n        let calculatorUrlPostfix = \"\";\n        switch (operator) {\n          case \"+\":\n            calculatorUrlPostfix = \"add\";\n            break;\n          case \"-\":\n            calculatorUrlPostfix = \"subtract\";\n            break;\n          case \"*\":\n            calculatorUrlPostfix = \"multiply\";\n            break;\n          case \"/\":\n            calculatorUrlPostfix = \"divide\";\n            break;\n        }\n        return {\n          url: `api/v1/calculators/${calculatorUrlPostfix}`,\n          method: \"POST\",\n          body: {\n            number1: convertStringToDouble(operand1),\n            number2: convertStringToDouble(operand2),\n            client_id,\n          },\n        };\n      },\n    }),\n    fetchSessions: build.query<any, any>({\n      query: (userId) => ({\n        url: `/api/v1/students/${userId}/sessions`,\n        method: \"GET\",\n      }),\n      providesTags: [\"session\"],\n    }),\n    sessionStart: build.mutation<any, any>({\n      query: () => ({\n        url: \"api/v1/sessions/start\",\n        method: \"POST\",\n      }),\n    }),\n    sessionStop: build.mutation<any, any>({\n      query: (sessionId) => ({\n        url: `api/v1/sessions/${sessionId}/end`,\n        method: \"POST\",\n        body: \"\",\n      }),\n      invalidatesTags: [\"session\"],\n    }),\n  }),\n});\n\nexport const {\n  useCalculateMutation,\n  useFetchSessionsQuery,\n  useSessionStartMutation,\n  useSessionStopMutation,\n} = calculatorApi;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  View,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  ActivityIndicator,\n} from \"react-native\";\nimport { Info } from \"../../components/Info\";\nimport { convertNumberToString, toggleNumberSign } from \"../../helpers\";\nimport { theme } from \"../../style/theme\";\n\ninterface CalculatorButtonProps {\n  text: string;\n  onClick: (text: string) => void;\n  style?: any;\n  disabled?: boolean;\n  loading?: boolean;\n}\n\nconst CalculatorButton: React.FC<CalculatorButtonProps> = ({\n  text,\n  onClick,\n  disabled,\n  loading = false,\n  style,\n}) => {\n  const handleClick = () => {\n    onClick(text);\n  };\n  return (\n    <TouchableOpacity\n      style={[styles.button].concat(style)}\n      onPress={handleClick}\n      disabled={disabled || loading}\n    >\n      <View style={styles.buttonContent}>\n        <Text style={styles.buttonText}>{text}</Text>\n        {loading && (\n          <ActivityIndicator\n            animating={true}\n            style={{\n              marginLeft: 8,\n            }}\n          />\n        )}\n      </View>\n    </TouchableOpacity>\n  );\n};\n\ninterface CalculatorProps {\n  calculate: (operand1: string, operand2: string, operator: string) => void;\n  loading: boolean;\n  result: string;\n  error?: string;\n  disabled?: boolean;\n}\n\nexport const Calculator: React.FC<CalculatorProps> = ({\n  calculate,\n  loading,\n  result,\n  error,\n  disabled = false,\n}) => {\n  const [state, setState] = useState({\n    operand1: \"\",\n    operand2: \"\",\n    operator: \"\",\n    result: result ?? \"\",\n  });\n\n  useEffect(() => {\n    setState((s) => ({ ...s, result }));\n  }, [result]);\n\n  const handlePress = (value: string) => {\n    const operand = !state.operator ? \"operand1\" : \"operand2\";\n\n    if (value === \"AC\") {\n      setState({\n        operand1: \"\",\n        operand2: \"\",\n        operator: \"\",\n        result: \"\",\n      });\n    } else if (value === \"+/-\" && (state.operand1 || state.operand2)) {\n      setState((current) => {\n        if (current.operand2) {\n          return {\n            ...current,\n            operand2: toggleNumberSign(current.operand2),\n          };\n        } else {\n          return {\n            ...current,\n            operand1: toggleNumberSign(current.operand1),\n          };\n        }\n      });\n    } else if (/[\\d,]/g.test(value)) {\n      if (/,/g.test(value) && /,/g.test(state[operand])) {\n        return;\n      }\n\n      setState((current) =>\n        current.result\n          ? {\n              operand1: value,\n              operand2: \"\",\n              operator: \"\",\n              result: \"\",\n            }\n          : {\n              ...current,\n              [operand]: state[operand].concat(value),\n            },\n      );\n    } else if (/[/x\\-*+]/.test(value)) {\n      if (!state.operand1) {\n        return;\n      }\n\n      if (state.result === 0 || state.result) {\n        setState((current) => ({\n          operand1: convertNumberToString(current.result as unknown as number),\n          operand2: \"\",\n          operator: value,\n          result: \"\",\n        }));\n        return;\n      }\n\n      setState((current) => ({\n        ...current,\n        operator: value,\n      }));\n    } else if (value === \"=\") {\n      if (!loading && state.operand1 && state.operand2 && state.operator) {\n        calculate(state.operand1, state.operand2, state.operator);\n      }\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      {error && <Info text={error} />}\n      <View style={styles.screen}>\n        <Text style={styles.screenText}>\n          {state.operand1} {state.operator} {state.operand2}\n          &nbsp;\n          {state.result || state.result === 0 ? (\n            <Text style={styles.resultText}>\n              = {state.result.toString().replace(/\\./g, \",\")}\n            </Text>\n          ) : null}\n        </Text>\n      </View>\n      <View style={styles.buttonGroup}>\n        <View style={styles.row}>\n          <CalculatorButton\n            text=\"AC\"\n            onClick={handlePress}\n            disabled={disabled}\n            style={{\n              backgroundColor: \"#606060\",\n            }}\n          />\n          <CalculatorButton\n            text=\"+/-\"\n            onClick={handlePress}\n            disabled={disabled}\n            style={{\n              backgroundColor: \"#606060\",\n            }}\n          />\n          <CalculatorButton\n            text=\"\"\n            onClick={handlePress}\n            disabled={true}\n            style={{\n              backgroundColor: \"#606060\",\n            }}\n          />\n          <CalculatorButton\n            text=\"/\"\n            onClick={handlePress}\n            disabled={disabled}\n            style={{\n              backgroundColor: \"#ff9500\",\n            }}\n          />\n        </View>\n        <View style={styles.row}>\n          <CalculatorButton\n            text=\"7\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"8\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"9\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"*\"\n            onClick={handlePress}\n            disabled={disabled}\n            style={{\n              backgroundColor: \"#ff9500\",\n            }}\n          />\n        </View>\n        <View style={styles.row}>\n          <CalculatorButton\n            text=\"4\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"5\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"6\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"-\"\n            onClick={handlePress}\n            disabled={disabled}\n            style={{\n              backgroundColor: \"#ff9500\",\n            }}\n          />\n        </View>\n        <View style={styles.row}>\n          <CalculatorButton\n            text=\"1\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"2\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"3\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"+\"\n            onClick={handlePress}\n            disabled={disabled}\n            style={{\n              backgroundColor: \"#ff9500\",\n            }}\n          />\n        </View>\n        <View style={styles.row}>\n          <CalculatorButton\n            text=\"0\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton text=\"\" onClick={handlePress} disabled={true} />\n          <CalculatorButton\n            text=\",\"\n            onClick={handlePress}\n            disabled={disabled}\n          />\n          <CalculatorButton\n            text=\"=\"\n            onClick={handlePress}\n            loading={loading}\n            style={{\n              backgroundColor: \"#ff9500\",\n            }}\n          />\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    width: \"100%\",\n    marginTop: 24,\n    maxWidth: 500,\n    height: 330,\n  },\n  row: {\n    display: \"flex\",\n    flex: 4,\n    height: 48,\n    width: \"100%\",\n    flexDirection: \"row\",\n  },\n  buttonGroup: {\n    width: \"100%\",\n    height: 5 * 48 + 24,\n  },\n  button: {\n    flex: 1,\n    margin: 4,\n    height: 48,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    textTransform: \"uppercase\",\n    width: \"100%\",\n    backgroundColor: \"#808080\",\n    borderRadius: 4,\n  },\n  buttonContent: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  buttonText: {\n    color: \"#ffffff\",\n    fontWeight: \"bold\",\n    fontSize: 20,\n  },\n  screen: {\n    padding: 8,\n    justifyContent: \"center\",\n    backgroundColor: \"#d4d4d2\",\n    marginBottom: 16,\n    height: 80,\n    borderRadius: 4,\n  },\n  screenText: {\n    fontWeight: \"bold\",\n    fontSize: 24,\n    textAlign: \"right\",\n  },\n  resultText: {\n    fontWeight: \"bold\",\n    fontSize: 28,\n    textAlign: \"right\",\n  },\n});\n","import { useLayoutEffect } from \"react\";\nimport { StyleSheet, Platform, SafeAreaView, Alert } from \"react-native\";\nimport { HeaderBackButton } from \"../../components/Header\";\nimport { useCalculateMutation } from \"../../store/services/calculator\";\nimport { Calculator } from \"./Calculator\";\n\nconst CalculatorScreen = ({ navigation }) => {\n  const [calculate, { isLoading: isCalculateLaoding, data, error, isError }] =\n    useCalculateMutation();\n\n  const handleBack = () => navigation.navigate(\"apps\");\n\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerLeft: () => <HeaderBackButton onBack={handleBack} />,\n    });\n  }, [navigation]);\n\n  const handleCalculate = async (\n    operand1: string,\n    operand2: string,\n    operator: string,\n  ) => {\n    await calculate({\n      operand1,\n      operand2,\n      operator,\n      client_id: Platform.OS,\n    });\n  };\n\n  return (\n    <SafeAreaView style={style.container}>\n      <Calculator\n        calculate={handleCalculate}\n        loading={isCalculateLaoding}\n        disabled={isCalculateLaoding}\n        result={data?.result}\n        error={isError ? error?.data?.message : \"\"}\n      />\n    </SafeAreaView>\n  );\n};\n\nconst style = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: \"100%\",\n    alignItems: \"center\",\n    padding: 24,\n  },\n});\n\nexport default CalculatorScreen;\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { calculatorApi } from \"../../store/services/calculator\";\nimport type { RootState } from \"../../store/store\";\n\ntype CalcualtorState = {\n  activeSession: unknown;\n};\n\nconst slice = createSlice({\n  name: \"calculator\",\n  initialState: {\n    activeSession: undefined,\n  } as CalcualtorState,\n  reducers: {\n    setActiveSession: (state, action) => {\n      state.activeSession = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addMatcher(\n        calculatorApi.endpoints.sessionStart.matchFulfilled,\n        (state, action) => {\n          state.activeSession = action.payload;\n        },\n      )\n      .addMatcher(\n        calculatorApi.endpoints.fetchSessions.matchFulfilled,\n        (state, action) => {\n          state.activeSession = action.payload;\n        },\n      )\n      .addMatcher(\n        calculatorApi.endpoints.sessionStop.matchFulfilled,\n        (state) => {\n          state.activeSession = undefined;\n        },\n      );\n  },\n});\n\nexport const { setActiveSession } = slice.actions;\n\nexport default slice.reducer;\n\nexport const getCalculatorState = (state: RootState) => state.calculator;\n","import {\n  StyleSheet,\n  Platform,\n  SafeAreaView,\n  Text,\n  View,\n  BackHandler,\n} from \"react-native\";\nimport { Button } from \"../components/Button\";\nimport {\n  useFetchSessionsQuery,\n  useSessionStartMutation,\n  useSessionStopMutation,\n} from \"../store/services/calculator\";\nimport { Info } from \"../components/Info\";\nimport { useAuth } from \"../hooks/useAuth\";\nimport { useCalculator } from \"../hooks/useCalculator\";\nimport { useDispatch } from \"react-redux\";\nimport { setCredentials } from \"./auth/authSlice\";\nimport { useEffect, useLayoutEffect } from \"react\";\nimport { HeaderRigtButton } from \"../components/Header\";\n\nexport const Apps = ({ navigation }) => {\n  const auth = useAuth();\n  const calculatorState = useCalculator();\n  const dispatch = useDispatch();\n\n  const { isLoading: isSessionsFetching } = useFetchSessionsQuery(\n    auth.user?.id,\n  );\n  const [\n    startSession,\n    {\n      error: sessionStartError,\n      isError: isSessionStartError,\n      isLoading: isSessionStartLoading,\n    },\n  ] = useSessionStartMutation();\n  const [stopSession] = useSessionStopMutation();\n\n  useLayoutEffect(() => {\n    navigation.setOptions({\n      headerRight: () => <HeaderRigtButton onPress={logout} text=\"Logout\" />,\n    });\n  }, [navigation, calculatorState]);\n\n  useEffect(() => {\n    const handleBackPress = () => {\n      logout();\n      return true;\n    };\n\n    const backHandler = BackHandler.addEventListener(\n      \"hardwareBackPress\",\n      handleBackPress,\n    );\n\n    return () => backHandler.remove();\n  }, []);\n\n  const logout = () => {\n    dispatch(setCredentials({}));\n  };\n\n  const handleStartSession = () => {\n    startSession();\n  };\n\n  const endSession = async () => {\n    if (calculatorState?.activeSession?.status === \"STARTED\") {\n      await stopSession(calculatorState.activeSession.id);\n    }\n  };\n\n  const openCalculator = () => {\n    navigation.push(\"calculator\");\n  };\n\n  const renderContent = () => {\n    const { activeSession } = calculatorState || {};\n    if (isSessionsFetching) {\n      return <Text>Loading...</Text>;\n    }\n\n    if (!activeSession || !activeSession.is_active) {\n      return <Info text=\"You don't have any active session\" />;\n    }\n\n    if (activeSession && activeSession.status !== \"STARTED\") {\n      return (\n        <Button\n          onClick={handleStartSession}\n          text={isSessionStartLoading ? \"Starting\" : \"Start session\"}\n          disabled={isSessionStartLoading}\n        />\n      );\n    }\n\n    return (\n      <>\n        <Button\n          style={style.button}\n          text=\"Open Calculator\"\n          onClick={openCalculator}\n        />\n        <Button\n          style={style.button}\n          text=\"End session\"\n          onClick={endSession}\n          type=\"secondary\"\n        />\n      </>\n    );\n  };\n\n  return (\n    <SafeAreaView style={style.safeArea}>\n      <View style={style.container}>\n        {isSessionStartError && (\n          <Info text={sessionStartError?.data?.message} />\n        )}\n        {renderContent()}\n      </View>\n    </SafeAreaView>\n  );\n};\n\nconst style = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    width: \"100%\",\n    height: \"100%\",\n  },\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    padding: 24,\n    maxWidth: Platform.OS === \"web\" ? 400 : \"100%\",\n    width: \"100%\",\n  },\n  button: {\n    width: \"100%\",\n    marginTop: 24,\n  },\n});\n","import { useMemo } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { getCalculatorState } from \"../screens/calculator/calculatorSlice\";\n\nexport const useCalculator = () => {\n  const state = useSelector(getCalculatorState);\n\n  return useMemo(() => state, [state]);\n};\n","import { createNativeStackNavigator } from \"@react-navigation/native-stack\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useAuth } from \"../hooks/useAuth\";\n\nimport { Login } from \"../screens/auth/Login\";\nimport CalculatorScreen from \"./calculator\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { useDispatch } from \"react-redux\";\nimport { setCredentials } from \"./auth/authSlice\";\nimport { Apps } from \"./Apps\";\nimport { HeaderBackground } from \"../components/Header\";\n\nconst Stack = createNativeStackNavigator();\n\nexport const Main = () => {\n  const auth = useAuth();\n  const [loading, setLoading] = useState(true);\n  const loggedIn = useMemo(() => auth && auth.user, [auth?.user]);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const checkIfUserDataExist = async () => {\n      try {\n        const jsonValue = await AsyncStorage.getItem(\"@user\");\n        const data = jsonValue != null ? JSON.parse(jsonValue) : null;\n\n        if (jsonValue) {\n          dispatch(setCredentials(data));\n        }\n\n        setLoading(false);\n      } catch (error) {\n        setLoading(false);\n      }\n    };\n\n    checkIfUserDataExist();\n  }, [dispatch, setCredentials]);\n\n  if (loading) {\n    return null;\n  }\n\n  return (\n    <Stack.Navigator initialRouteName=\"apps\">\n      {!loggedIn ? (\n        <Stack.Screen\n          name=\"login\"\n          component={Login}\n          options={{ header: () => null }}\n        />\n      ) : (\n        <>\n          <Stack.Screen\n            name=\"apps\"\n            component={Apps}\n            options={{\n              headerBackVisible: false,\n              headerTitle: \"\",\n              headerBackground: () => <HeaderBackground />,\n            }}\n          />\n          <Stack.Screen\n            name=\"calculator\"\n            component={CalculatorScreen}\n            options={{\n              headerBackVisible: false,\n              headerTitle: \"\",\n              headerBackground: () => <HeaderBackground />,\n            }}\n          />\n        </>\n      )}\n    </Stack.Navigator>\n  );\n};\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport { api } from \"./services/api\";\nimport authReducer from \"../screens/auth/authSlice\";\nimport calculatorReducer from \"../screens/calculator/calculatorSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    [api.reducerPath]: api.reducer,\n    auth: authReducer,\n    calculator: calculatorReducer,\n  },\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat(api.middleware),\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppDispatch = typeof store.dispatch;\n","import { Main } from \"./src/screens/Main\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./src/store/store\";\nimport { NavigationContainer } from \"@react-navigation/native\";\n\nexport default function App() {\n  return (\n    <Provider store={store}>\n      <NavigationContainer>\n        <Main />\n      </NavigationContainer>\n    </Provider>\n  );\n}\n"],"sourceRoot":""}
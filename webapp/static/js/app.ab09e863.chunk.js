(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{105:function(e,t,r){e.exports=r.p+"static/media/app-logo.3be78e48.png"},138:function(e,t,r){"use strict";r.d(t,"a",(function(){return xe}));var n,o,a=r(191),c=r(5),s=r.n(c),i=r(7),l=r.n(i),u=r(14),d=r.n(u),b=r(2),j=r(3),p=r(42),f=r(8),x=r(0),O=r(105),h=r.n(O),y=r(85),g=r(68),m=r(6),w=Object(m.d)({name:"auth",initialState:{user:null,access_token:null,refresh_token:null},reducers:{setCredentials:function(e,t){e.user=t.payload.user,e.access_token=t.payload.access_token,e.refresh_token=t.payload.refresh_token}}}),k=w.actions.setCredentials,v=w.reducer,S=r(27),C=r(139),P=Object(S.d)({baseUrl:null==(n=C.a.manifest)||null==(o=n.extra)?void 0:o.baseUrl,headers:{"content-type":"application/json"},prepareHeaders:function(e,t){var r=(0,t.getState)().auth.access_token;return r&&e.set("authorization","Bearer "+r),e}}),T=function(e,t,r){var n,o,a,c,s;return d.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,d.a.awrap(P(e,t,r));case 2:if(!(n=i.sent).error||401!==n.error.status){i.next=16;break}return i.next=6,d.a.awrap(P("/refresh-token",t,r));case 6:if(!(o=i.sent).data){i.next=15;break}return a=o.data,c=a.access_token,s=a.refresh_token,t.dispatch(k({user:Object(g.a)(c),access_token:c,refresh_token:s})),i.next=12,d.a.awrap(P(e,t,r));case 12:n=i.sent,i.next=16;break;case 15:t.dispatch(k());case 16:return i.abrupt("return",n);case 17:case"end":return i.stop()}}),null,null,null,Promise)},_=function(e){return Number.parseFloat(e.replace(/,/g,"."))},E=Object(y.a)({reducerPath:"api",baseQuery:T,endpoints:function(e){return{login:e.mutation({query:function(e){return{url:"api/v1/login",method:"POST",body:e}},transformResponse:function(e){var t=e.access_token,r=e.refresh_token;return{user:Object(g.a)(t),access_token:t,refresh_token:r}},onQueryStarted:function(e,t){var r=t.dispatch,n=t.queryFulfilled;return function(){var e,t;return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,d.a.awrap(n);case 3:e=o.sent,t=e.data,r(k(t)),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.log(o.t0);case 11:case"end":return o.stop()}}),null,null,[[0,8]],Promise)}()}}),calculate:e.mutation({query:function(e){var t=e.operand1,r=e.operand2,n=e.operator,o=e.client_id,a="";switch(n){case"+":a="add";break;case"-":a="subtract";break;case"*":a="multiply";break;case"/":a="divide"}return{url:"api/v1/calculators/"+a,method:"POST",body:{number1:_(t),number2:_(r),client_id:o}}}}),fetchSessions:e.mutation({query:function(){return{url:"api/v1/sessions",method:"POST",body:""}}}),sessionStart:e.mutation({query:function(){return{url:"api/v1/sessions/start",method:"POST"}}}),sessionStop:e.mutation({query:function(e){return{url:"api/v1/sessions/"+e.sessionId+"/end",method:"POST",body:""}}})}}}),D=E.useLoginMutation,z=E.useCalculateMutation,L=(E.useFetchSessionsMutation,E.useSessionStartMutation),B=(E.useSessionStopMutation,r(23)),R=r(4),W=function(e){var t=e.text;return Object(R.jsx)(b.a,{style:q.container,children:Object(R.jsx)(B.a,{style:q.text,children:t})})},q=j.a.create({container:{padding:8,borderWidth:1,borderColor:"red",borderRadius:4,width:"100%",marginTop:8,marginBottom:16},text:{color:"red",fontSize:14}}),F=r(11),I=r.n(F),M=r(126),A={primary:"#32CE57",white:"#ffffff",grey:"#d9d9d9",lightGrey:"#f5f5f7",red:"#FF0056",lightRed:"#E10958"},G=["label","error"];function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J=function(e){var t=e.label,r=e.error,n=I()(e,G),o=r?H:Q;return Object(R.jsxs)(b.a,{style:o.containerStyle,children:[t&&Object(R.jsx)(B.a,{style:o.labelStyle,children:t}),Object(R.jsx)(M.a,U({style:o.inputStyle},n)),r&&Object(R.jsx)(B.a,{style:o.errorLabelStyle,children:r})]})},Q=j.a.create({containerStyle:{width:"100%"},inputStyle:{height:48,paddingLeft:16,borderWidth:1,borderColor:A.grey,borderRadius:4},labelStyle:{fontSize:12,marginBottom:4},errorLabelStyle:{fontSize:12,color:A.red,marginTop:4}}),H=j.a.create({containerStyle:{width:"100%"},inputStyle:{height:48,paddingLeft:16,borderWidth:1,borderColor:A.red,borderRadius:4},labelStyle:{fontSize:12,marginBottom:4},errorLabelStyle:{fontSize:12,color:A.red,marginTop:4}}),K=r(74),V=function(e){var t=e.text,r=e.onClick,n=e.disabled,o=e.style,a=[X.button];return o&&a.push(o),Object(R.jsx)(K.a,{style:a,onPress:r,disabled:n,children:Object(R.jsx)(B.a,{style:X.text,children:t})})},X=j.a.create({button:{height:48,alignItems:"center",justifyContent:"center",textTransform:"uppercase",width:"100%",backgroundColor:A.primary,borderRadius:4},text:{fontSize:14,color:A.white}}),Y=function(e){var t=e.children;return Object(R.jsx)(b.a,{style:Z.container,children:t})},Z=j.a.create({container:{width:"100%",marginBottom:16}});function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var te=function(e){var t,r,n=e.navigation,o=Object(x.useState)({username:"",password:""}),a=l()(o,2),c=a[0],s=a[1],i=D(),u=l()(i,2),j=u[0],f=u[1];return Object(R.jsxs)(b.a,{style:re.container,children:[Object(R.jsx)(p.a,{source:h.a,style:{width:200,height:60,marginBottom:48}}),f.isError&&Object(R.jsx)(W,{text:null==(t=f.error)||null==(r=t.data)?void 0:r.message}),Object(R.jsx)(Y,{children:Object(R.jsx)(J,{placeholder:"Username",label:"Enter username*",value:c.username,onChangeText:function(e){s((function(t){return ee(ee({},t),{},{username:e})}))},secureTextEntry:!1})}),Object(R.jsx)(Y,{children:Object(R.jsx)(J,{placeholder:"Password",label:"Enter password*",secureTextEntry:!0,value:c.password,onChangeText:function(e){s((function(t){return ee(ee({},t),{},{password:e})}))}})}),Object(R.jsx)(Y,{children:Object(R.jsx)(V,{text:"Login",onClick:function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.awrap(j({username:c.username,password:c.password}).unwrap());case 2:n.navigate("home");case 3:case"end":return e.stop()}}),null,null,null,Promise)},disabled:f.isLoading})})]})},re=j.a.create({container:ee({flex:1,alignItems:"center",padding:24},f.a.select({web:{width:400},default:"100%"})),loginButton:{width:"100%"}});function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ae,ce=function(e){var t=e.text,r=e.onClick,n=e.disabled;return Object(R.jsx)(K.a,{style:ie.button,onPress:function(){r(t)},disabled:n,children:Object(R.jsx)(B.a,{style:ie.buttonText,children:t})})},se=function(e){var t=e.calculate,r=e.loading,n=e.result,o=Object(x.useState)({operand1:"",operand2:"",operator:"",result:null!=n?n:""}),a=l()(o,2),c=a[0],i=a[1];Object(x.useEffect)((function(){i((function(e){return oe(oe({},e),{},{result:n})}))}),[n]);var u=function(e){var n=c.operator?"operand2":"operand1";if("AC"===e)i({operand1:"",operand2:"",operator:"",result:""});else if(/[\d,]/g.test(e)){if(/,/g.test(e)&&/,/g.test(c[n]))return;i((function(t){return t.result?{operand1:e,operand2:"",operator:"",result:""}:oe(oe({},t),{},s()({},n,c[n].concat(e)))}))}else if(/[/x\-*+]/.test(e)){if(!c.operand1)return;i((function(t){return oe(oe({},t),{},{operator:e})}))}else"="===e&&(r||t(c.operand1,c.operand2,c.operator))};return Object(R.jsxs)(b.a,{style:ie.container,children:[Object(R.jsx)(b.a,{style:ie.screen,children:Object(R.jsxs)(B.a,{style:ie.screenText,children:[c.operand1," ",c.operator," ",c.operand2,c.result?Object(R.jsxs)(B.a,{style:ie.resultText,children:["= ",c.result.toString().replace(/\./g,",")]}):null]})}),Object(R.jsxs)(b.a,{style:ie.buttonGroup,children:[Object(R.jsxs)(b.a,{style:ie.row,children:[Object(R.jsx)(ce,{text:"AC",onClick:u}),Object(R.jsx)(ce,{text:"",onClick:u,disabled:!0}),Object(R.jsx)(ce,{text:"",onClick:u,disabled:!0}),Object(R.jsx)(ce,{text:"/",onClick:u})]}),Object(R.jsxs)(b.a,{style:ie.row,children:[Object(R.jsx)(ce,{text:"7",onClick:u}),Object(R.jsx)(ce,{text:"8",onClick:u}),Object(R.jsx)(ce,{text:"9",onClick:u}),Object(R.jsx)(ce,{text:"*",onClick:u})]}),Object(R.jsxs)(b.a,{style:ie.row,children:[Object(R.jsx)(ce,{text:"4",onClick:u}),Object(R.jsx)(ce,{text:"5",onClick:u}),Object(R.jsx)(ce,{text:"6",onClick:u}),Object(R.jsx)(ce,{text:"-",onClick:u})]}),Object(R.jsxs)(b.a,{style:ie.row,children:[Object(R.jsx)(ce,{text:"1",onClick:u}),Object(R.jsx)(ce,{text:"2",onClick:u}),Object(R.jsx)(ce,{text:"3",onClick:u}),Object(R.jsx)(ce,{text:"+",onClick:u})]}),Object(R.jsxs)(b.a,{style:ie.row,children:[Object(R.jsx)(ce,{text:"0",onClick:u}),Object(R.jsx)(ce,{text:"",onClick:u,disabled:!0}),Object(R.jsx)(ce,{text:",",onClick:u}),Object(R.jsx)(ce,{text:"=",onClick:u,disabled:r})]})]})]})},ie=j.a.create({container:{width:"100%",marginTop:24,maxWidth:500,height:330},row:{display:"flex",flex:4,height:48,width:"100%",flexDirection:"row"},buttonGroup:{width:"100%",height:264},button:{flex:1,margin:4,height:48,alignItems:"center",justifyContent:"center",textTransform:"uppercase",width:"100%",backgroundColor:A.primary,borderRadius:4},buttonText:{color:"#ffffff",fontWeight:"bold",fontSize:16},screen:{padding:8,justifyContent:"center",backgroundColor:"#dbdbdb",marginBottom:16,height:80},screenText:{fontWeight:"bold",fontSize:24,textAlign:"right"},resultText:{fontWeight:"bold",fontSize:28,textAlign:"right"}}),le=function(){var e,t=z(),r=l()(t,2),n=r[0],o=r[1],a=o.isLoading,c=o.data,s=L(),i=l()(s,2),u=i[0],j=i[1],p=j.error,O=j.isError,h=j.isLoading,y=j.isSuccess;Object(x.useEffect)((function(){u()}),[u]);return h?Object(R.jsx)(B.a,{children:"Getting sessions ..."}):Object(R.jsxs)(b.a,{style:ue.container,children:[O&&Object(R.jsx)(W,{text:null==p||null==(e=p.data)?void 0:e.message}),y&&Object(R.jsx)(se,{calculate:function(e,t,r){return d.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d.a.awrap(n({operand1:e,operand2:t,operator:r,client_id:f.a.OS}));case 2:case"end":return o.stop()}}),null,null,null,Promise)},loading:a,result:null==c?void 0:c.result})]})},ue=j.a.create({container:{flex:1,width:"100%",alignItems:"center",padding:24,marginTop:48}}),de=Object(a.a)(),be=function(){return Object(R.jsxs)(de.Navigator,{initialRouteName:"login",screenOptions:{header:function(){return null}},children:[Object(R.jsx)(de.Screen,{name:"login",component:te}),Object(R.jsx)(de.Screen,{name:"home",component:le})]})},je=r(25),pe=Object(m.a)({reducer:(ae={},s()(ae,E.reducerPath,E.reducer),s()(ae,"auth",v),ae),middleware:function(e){return e().concat(E.middleware)}}),fe=r(190);function xe(){return Object(R.jsx)(je.a,{store:pe,children:Object(R.jsx)(fe.a,{children:Object(R.jsx)(be,{})})})}},143:function(e,t,r){e.exports=r(183)}},[[143,1,2]]]);
//# sourceMappingURL=app.ab09e863.chunk.js.map